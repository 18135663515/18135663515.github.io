<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>🚀 MySQL 的 14 个宝藏功能深度解析 | 社畜阿文</title><meta name="author" content="阿文"><meta name="copyright" content="阿文"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="MySQL 的 14 个宝藏功能深度解析 本文将以 新手友好 的方式，详细讲解 MySQL 中 14 个核心功能的使用方法，包括 代码注释、实际应用场景** 和 避坑指南。每个功能均提供 多场景代码示例，助你彻底掌握 MySQL 的高级用法！✨**   目录 GROUP_CONCAT：字符串聚合 CHAR_LENGTH：字符级长度计算 LOCATE：精准定位子串 REPLACE：字符串手术刀 NO">
<meta property="og:type" content="article">
<meta property="og:title" content="🚀 MySQL 的 14 个宝藏功能深度解析">
<meta property="og:url" content="http://example.com/2025/02/28/%F0%9F%9A%80%20MySQL%20%E7%9A%84%2014%20%E4%B8%AA%E5%AE%9D%E8%97%8F%E5%8A%9F%E8%83%BD%E8%AF%A6%E8%A7%A3/index.html">
<meta property="og:site_name" content="社畜阿文">
<meta property="og:description" content="MySQL 的 14 个宝藏功能深度解析 本文将以 新手友好 的方式，详细讲解 MySQL 中 14 个核心功能的使用方法，包括 代码注释、实际应用场景** 和 避坑指南。每个功能均提供 多场景代码示例，助你彻底掌握 MySQL 的高级用法！✨**   目录 GROUP_CONCAT：字符串聚合 CHAR_LENGTH：字符级长度计算 LOCATE：精准定位子串 REPLACE：字符串手术刀 NO">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic1.imgdb.cn/item/67c433a7d0e0a243d40a1fce.png">
<meta property="article:published_time" content="2025-02-27T16:00:00.000Z">
<meta property="article:modified_time" content="2025-03-02T10:37:21.917Z">
<meta property="article:author" content="阿文">
<meta property="article:tag" content="MySQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic1.imgdb.cn/item/67c433a7d0e0a243d40a1fce.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "🚀 MySQL 的 14 个宝藏功能深度解析",
  "url": "http://example.com/2025/02/28/%F0%9F%9A%80%20MySQL%20%E7%9A%84%2014%20%E4%B8%AA%E5%AE%9D%E8%97%8F%E5%8A%9F%E8%83%BD%E8%AF%A6%E8%A7%A3/",
  "image": "https://pic1.imgdb.cn/item/67c433a7d0e0a243d40a1fce.png",
  "datePublished": "2025-02-27T16:00:00.000Z",
  "dateModified": "2025-03-02T10:37:21.917Z",
  "author": [
    {
      "@type": "Person",
      "name": "阿文",
      "url": "http://example.com/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2025/02/28/%F0%9F%9A%80%20MySQL%20%E7%9A%84%2014%20%E4%B8%AA%E5%AE%9D%E8%97%8F%E5%8A%9F%E8%83%BD%E8%AF%A6%E8%A7%A3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: '',
  enable_page_level_ads: 'true'
});</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-center"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '🚀 MySQL 的 14 个宝藏功能深度解析',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/TouXing.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">32</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/love1/mypage.html"><i class="fa-fw fas fa-heart"></i><span> 情侣</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 我们</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://pic1.imgdb.cn/item/67c433a7d0e0a243d40a1fce.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/%E5%8D%9A%E5%AE%A2.png" alt="Logo"><span class="site-name">社畜阿文</span></a><a class="nav-page-title" href="/"><span class="site-name">🚀 MySQL 的 14 个宝藏功能深度解析</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/love1/mypage.html"><i class="fa-fw fas fa-heart"></i><span> 情侣</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 列表</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 我们</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">🚀 MySQL 的 14 个宝藏功能深度解析</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-02-27T16:00:00.000Z" title="发表于 2025-02-28 00:00:00">2025-02-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-03-02T10:37:21.917Z" title="更新于 2025-03-02 18:37:21">2025-03-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/MySQL/">MySQL</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>8分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="MySQL-的-14-个宝藏功能深度解析"><a href="#MySQL-的-14-个宝藏功能深度解析" class="headerlink" title="MySQL 的 14 个宝藏功能深度解析"></a>MySQL 的 14 个宝藏功能深度解析</h1><ul>
<li><strong>本文将以 <strong>新手友好</strong> 的方式，详细讲解 MySQL 中 14 个核心功能的使用方法，包括 <strong>代码注释</strong>、</strong>实际应用场景** 和 <strong>避坑指南</strong>。每个功能均提供 <strong>多场景代码示例</strong>，助你彻底掌握 MySQL 的高级用法！✨**</li>
</ul>
<hr>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol>
<li>GROUP_CONCAT：字符串聚合</li>
<li>CHAR_LENGTH：字符级长度计算</li>
<li>LOCATE：精准定位子串</li>
<li>REPLACE：字符串手术刀</li>
<li>NOW：时间管理大师</li>
<li>INSERT INTO … SELECT：数据搬运工</li>
<li>INSERT IGNORE：优雅防冲突</li>
<li>SELECT FOR UPDATE：并发安全锁</li>
<li>ON DUPLICATE KEY UPDATE：智能写入</li>
<li>SHOW CREATE TABLE：结构克隆术</li>
<li>CREATE TABLE … SELECT：快速建表</li>
<li>EXPLAIN：SQL 透视镜</li>
<li>SHOW PROCESSLIST：连接监视器</li>
<li>mysqldump：数据保险箱</li>
</ol>
<hr>
<h2 id="1-GROUP-CONCAT：字符串聚合"><a href="#1-GROUP-CONCAT：字符串聚合" class="headerlink" title="1. GROUP_CONCAT：字符串聚合"></a>1. GROUP_CONCAT：字符串聚合</h2><h3 id="🛠️-功能说明"><a href="#🛠️-功能说明" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>将分组中的多条记录的字段值合并成一个字符串，默认用逗号分隔。</li>
</ul>
<h3 id="🎯-应用场景"><a href="#🎯-应用场景" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>生成逗号分隔的标签列表</li>
<li>聚合多行数据为报表中的单行</li>
</ul>
<h3 id="📝-示例代码"><a href="#📝-示例代码" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 场景：统计每个部门的员工姓名列表</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    department_id <span class="keyword">AS</span> <span class="string">&#x27;部门ID&#x27;</span>,</span><br><span class="line">    GROUP_CONCAT(</span><br><span class="line">        employee_name </span><br><span class="line">        <span class="keyword">ORDER</span> <span class="keyword">BY</span> hire_date <span class="keyword">DESC</span>  <span class="comment">-- 按入职时间倒序排列</span></span><br><span class="line">        SEPARATOR <span class="string">&#x27; / &#x27;</span>          <span class="comment">-- 自定义分隔符</span></span><br><span class="line">    ) <span class="keyword">AS</span> <span class="string">&#x27;员工列表&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">部门ID | 员工列表</span><br><span class="line">-------|-------------------</span><br><span class="line">1      | 张三 / 李四 / 王五</span><br><span class="line">2      | Lucy / Tom</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点"><a href="#⚠️-易错点" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>长度限制</strong>：默认结果最大 1024 字节<br><strong>解决</strong>：调整全局变量 <code>SET SESSION group_concat_max_len = 1000000;</code></li>
<li><strong>乱序问题</strong>：未指定排序会导致结果顺序不确定<br><strong>技巧</strong>：使用 <code>ORDER BY</code> 明确排序规则</li>
</ol>
<h3 id="🏭-实际案例"><a href="#🏭-实际案例" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><p><strong>电商系统</strong>：在订单详情页展示同一订单的所有商品名称，避免多次查询。</p>
<hr>
<h2 id="2-CHAR-LENGTH：字符级长度计算"><a href="#2-CHAR-LENGTH：字符级长度计算" class="headerlink" title="2. CHAR_LENGTH：字符级长度计算"></a>2. CHAR_LENGTH：字符级长度计算</h2><h3 id="🛠️-功能说明-1"><a href="#🛠️-功能说明-1" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>准确计算字符串的 <strong>字符数</strong>（而非字节数），支持中文等多字节字符。</li>
</ul>
<h3 id="🎯-应用场景-1"><a href="#🎯-应用场景-1" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>验证用户输入长度</li>
<li>处理多语言混合内容</li>
</ul>
<h3 id="📝-示例代码-1"><a href="#📝-示例代码-1" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 场景：验证用户名长度（中文名友好）</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    user_name,</span><br><span class="line">    <span class="keyword">CHAR_LENGTH</span>(user_name) <span class="keyword">AS</span> name_length</span><br><span class="line"><span class="keyword">FROM</span> users</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">CHAR_LENGTH</span>(user_name) <span class="operator">&gt;</span> <span class="number">10</span>;  <span class="comment">-- 查找超长用户名</span></span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">user_name   | name_length</span><br><span class="line">------------|------------</span><br><span class="line">克里斯蒂亚诺 | 5          -- 5个汉字</span><br><span class="line">John_Snow_With_Very_Long_Name | 25</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-1"><a href="#⚠️-易错点-1" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>与 LENGTH 混淆</strong>：<br><code>LENGTH(&#39;你好&#39;)</code> 返回 4（UTF-8 编码），而 <code>CHAR_LENGTH(&#39;你好&#39;)</code> 返回 2</li>
</ol>
<h3 id="🏭-实际案例-1"><a href="#🏭-实际案例-1" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><p><strong>多语言系统</strong>：确保用户输入的日文地址不超过数据库字段的字符限制。</p>
<hr>
<h2 id="3-LOCATE：精准定位子串"><a href="#3-LOCATE：精准定位子串" class="headerlink" title="3. LOCATE：精准定位子串"></a>3. LOCATE：精准定位子串</h2><h3 id="🛠️-功能说明-2"><a href="#🛠️-功能说明-2" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>返回子字符串在目标字符串中的起始位置（从 1 开始计数）。</li>
</ul>
<h3 id="🎯-应用场景-2"><a href="#🎯-应用场景-2" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>提取 URL 中的特定参数</li>
<li>数据清洗时定位非法字符</li>
</ul>
<h3 id="📝-示例代码-2"><a href="#📝-示例代码-2" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 场景：解析 URL 中的域名部分</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    url,</span><br><span class="line">    LOCATE(<span class="string">&#x27;://&#x27;</span>, url) <span class="keyword">AS</span> protocol_end_pos,</span><br><span class="line">    LOCATE(<span class="string">&#x27;/&#x27;</span>, LOCATE(<span class="string">&#x27;://&#x27;</span>, url) <span class="operator">+</span> <span class="number">3</span>) <span class="keyword">AS</span> domain_end_pos,</span><br><span class="line">    <span class="built_in">SUBSTRING</span>(</span><br><span class="line">        url, </span><br><span class="line">        LOCATE(<span class="string">&#x27;://&#x27;</span>, url) <span class="operator">+</span> <span class="number">3</span>, </span><br><span class="line">        LOCATE(<span class="string">&#x27;/&#x27;</span>, LOCATE(<span class="string">&#x27;://&#x27;</span>, url) <span class="operator">+</span> <span class="number">3</span>) <span class="operator">-</span> (LOCATE(<span class="string">&#x27;://&#x27;</span>, url) <span class="operator">+</span> <span class="number">3</span>)</span><br><span class="line">    ) <span class="keyword">AS</span> domain</span><br><span class="line"><span class="keyword">FROM</span> website_logs;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url                          | protocol_end_pos | domain_end_pos | domain</span><br><span class="line">---------------------------  |------------------|----------------|---------</span><br><span class="line">https://www.example.com/path | 6                | 19             | www.example.com</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-2"><a href="#⚠️-易错点-2" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>大小写敏感</strong>：<code>LOCATE(&#39;A&#39;, &#39;abc&#39;)</code> 返回 0<br><strong>技巧</strong>：先用 <code>LOWER()</code> 统一转小写</li>
<li><strong>多次嵌套</strong>：复杂的嵌套定位可能导致性能下降</li>
</ol>
<h3 id="🏭-实际案例-2"><a href="#🏭-实际案例-2" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><p><strong>日志分析</strong>：快速定位异常日志中的错误代码位置。</p>
<hr>
<h2 id="4-REPLACE：字符串手术刀"><a href="#4-REPLACE：字符串手术刀" class="headerlink" title="4. REPLACE：字符串手术刀"></a>4. REPLACE：字符串手术刀</h2><h3 id="🛠️-功能说明-3"><a href="#🛠️-功能说明-3" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><p>全局替换字符串中的指定子串。</p>
<h3 id="🎯-应用场景-3"><a href="#🎯-应用场景-3" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>数据脱敏（如替换手机号中间四位）</li>
<li>批量修正数据格式错误</li>
</ul>
<h3 id="📝-示例代码-3"><a href="#📝-示例代码-3" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 场景：手机号脱敏处理</span></span><br><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    user_id,</span><br><span class="line">    REPLACE(phone, SUBSTR(phone, <span class="number">4</span>, <span class="number">4</span>), <span class="string">&#x27;****&#x27;</span>) <span class="keyword">AS</span> masked_phone</span><br><span class="line"><span class="keyword">FROM</span> users;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">user_id | masked_phone</span><br><span class="line">--------|-------------</span><br><span class="line">1       | 138****8910</span><br><span class="line">2       | 159****1234</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-3"><a href="#⚠️-易错点-3" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>意外替换</strong>：<code>REPLACE(&#39;aaa&#39;, &#39;aa&#39;, &#39;b&#39;)</code> 会得到 ‘ba’<br><strong>建议</strong>：先测试替换范围</li>
</ol>
<h3 id="🏭-实际案例-3"><a href="#🏭-实际案例-3" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><p><strong>CRM系统</strong>：批量替换客户地址中的旧行政区划名称。</p>
<hr>
<h2 id="5-NOW：时间管理大师"><a href="#5-NOW：时间管理大师" class="headerlink" title="5. NOW：时间管理大师"></a>5. NOW：时间管理大师</h2><h3 id="🛠️-功能说明-4"><a href="#🛠️-功能说明-4" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>返回当前日期和时间。</li>
</ul>
<h3 id="🎯-应用场景-4"><a href="#🎯-应用场景-4" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>记录操作时间</li>
<li>生成时间戳</li>
</ul>
<h3 id="📝-示例代码-4"><a href="#📝-示例代码-4" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 场景：记录订单创建时间</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> orders (order_id, user_id, create_time)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1001</span>, <span class="number">123</span>, NOW());</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">order_id | user_id | create_time</span><br><span class="line">---------|---------|-------------------</span><br><span class="line">1001     | 123     | 2023-10-01 12:34:56</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-4"><a href="#⚠️-易错点-4" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>与 SYSDATE 混淆</strong>：<br><code>NOW()</code> 返回语句开始执行的时间，<code>SYSDATE</code> 返回函数执行的时间</li>
</ol>
<h3 id="🏭-实际案例-4"><a href="#🏭-实际案例-4" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><p><strong>订单系统</strong>：在插入订单时，自动记录当前时间。</p>
<hr>
<h2 id="6-INSERT-INTO-…-SELECT：数据搬运工"><a href="#6-INSERT-INTO-…-SELECT：数据搬运工" class="headerlink" title="6. INSERT INTO … SELECT：数据搬运工"></a>6. INSERT INTO … SELECT：数据搬运工</h2><h3 id="🛠️-功能说明-5"><a href="#🛠️-功能说明-5" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>将查询结果插入到另一张表中。</li>
</ul>
<h3 id="🎯-应用场景-5"><a href="#🎯-应用场景-5" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>数据迁移</li>
<li>备份数据</li>
</ul>
<h3 id="📝-示例代码-5"><a href="#📝-示例代码-5" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 场景：将新员工数据迁移到新表</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> new_employees (name, department)</span><br><span class="line"><span class="keyword">SELECT</span> name, department <span class="keyword">FROM</span> old_employees <span class="keyword">WHERE</span> hire_date <span class="operator">&gt;</span> <span class="string">&#x27;2023-01-01&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">new_employees 表新增数据：</span><br><span class="line">name  | department</span><br><span class="line">------|-----------</span><br><span class="line">张三  | IT</span><br><span class="line">李四  | HR</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-5"><a href="#⚠️-易错点-5" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>字段类型和数量必须匹配</strong><br><strong>建议</strong>：先测试查询结果</li>
</ol>
<h3 id="🏭-实际案例-5"><a href="#🏭-实际案例-5" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><p><strong>数据迁移</strong>：将旧系统的数据迁移到新系统中。</p>
<hr>
<h2 id="7-INSERT-IGNORE：优雅防冲突"><a href="#7-INSERT-IGNORE：优雅防冲突" class="headerlink" title="7. INSERT IGNORE：优雅防冲突"></a>7. INSERT IGNORE：优雅防冲突</h2><h3 id="🛠️-功能说明-6"><a href="#🛠️-功能说明-6" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>插入数据时忽略重复键错误。</li>
</ul>
<h3 id="🎯-应用场景-6"><a href="#🎯-应用场景-6" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>插入数据时避免主键冲突</li>
<li>数据去重</li>
</ul>
<h3 id="📝-示例代码-6"><a href="#📝-示例代码-6" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 场景：插入用户数据时，忽略已存在的用户</span></span><br><span class="line"><span class="keyword">INSERT</span> IGNORE <span class="keyword">INTO</span> users (id, name) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;Alice&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果 id=1 的用户已存在，则忽略插入</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-6"><a href="#⚠️-易错点-6" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>忽略错误可能导致数据丢失</strong><br><strong>建议</strong>：先查询是否存在</li>
</ol>
<h3 id="🏭-实际案例-6"><a href="#🏭-实际案例-6" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><p><strong>用户系统</strong>：批量插入用户数据时，忽略已存在的用户。</p>
<hr>
<h2 id="8-SELECT-FOR-UPDATE：并发安全锁"><a href="#8-SELECT-FOR-UPDATE：并发安全锁" class="headerlink" title="8. SELECT FOR UPDATE：并发安全锁"></a>8. SELECT FOR UPDATE：并发安全锁</h2><h3 id="🛠️-功能说明-7"><a href="#🛠️-功能说明-7" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>锁定查询结果，防止其他事务修改。</li>
</ul>
<h3 id="🎯-应用场景-7"><a href="#🎯-应用场景-7" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>防止并发修改</li>
<li>实现悲观锁</li>
</ul>
<h3 id="📝-示例代码-7"><a href="#📝-示例代码-7" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 场景：锁定订单行，防止重复支付</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span> <span class="keyword">FOR</span> <span class="keyword">UPDATE</span>;</span><br><span class="line"><span class="comment">-- 其他事务无法修改该行，直到当前事务提交或回滚</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">锁定 id=1 的订单行</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-7"><a href="#⚠️-易错点-7" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>未提交事务可能导致死锁</strong><br><strong>建议</strong>：尽快提交事务</li>
</ol>
<h3 id="🏭-实际案例-7"><a href="#🏭-实际案例-7" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><p><strong>支付系统</strong>：锁定订单行，防止重复支付。</p>
<hr>
<h2 id="9-ON-DUPLICATE-KEY-UPDATE：智能写入"><a href="#9-ON-DUPLICATE-KEY-UPDATE：智能写入" class="headerlink" title="9. ON DUPLICATE KEY UPDATE：智能写入"></a>9. ON DUPLICATE KEY UPDATE：智能写入</h2><h3 id="🛠️-功能说明-8"><a href="#🛠️-功能说明-8" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>插入数据时，如果主键冲突则更新数据。</li>
</ul>
<h3 id="🎯-应用场景-8"><a href="#🎯-应用场景-8" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>插入或更新数据</li>
<li>数据同步</li>
</ul>
<h3 id="📝-示例代码-8"><a href="#📝-示例代码-8" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 场景：插入用户信息时，如果用户已存在则更新</span></span><br><span class="line"><span class="keyword">INSERT INTO</span> users (id, name) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;Alice&#x27;</span>)</span><br><span class="line"><span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span> name <span class="operator">=</span> <span class="string">&#x27;Alice&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果 id=1 的用户已存在，则更新 name 字段</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-8"><a href="#⚠️-易错点-8" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>必须定义主键或唯一约束</strong><br><strong>建议</strong>：确保表结构正确</li>
</ol>
<h3 id="🏭-实际案例-8"><a href="#🏭-实际案例-8" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><ul>
<li><strong>用户系统</strong>：插入用户信息时，如果用户已存在则更新。</li>
</ul>
<hr>
<h2 id="10-SHOW-CREATE-TABLE：结构克隆术"><a href="#10-SHOW-CREATE-TABLE：结构克隆术" class="headerlink" title="10. SHOW CREATE TABLE：结构克隆术"></a>10. SHOW CREATE TABLE：结构克隆术</h2><h3 id="🛠️-功能说明-9"><a href="#🛠️-功能说明-9" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>查看表的创建语句。</li>
</ul>
<h3 id="🎯-应用场景-9"><a href="#🎯-应用场景-9" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>备份表结构</li>
<li>调试表定义</li>
</ul>
<h3 id="📝-示例代码-9"><a href="#📝-示例代码-9" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 场景：查看 users 表的创建语句</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE TABLE</span> users;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Table   | Create Table</span><br><span class="line">--------|--------------------------------------------------</span><br><span class="line">users   | CREATE TABLE `users` (</span><br><span class="line">        |   `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">        |   `name` varchar(255) DEFAULT NULL,</span><br><span class="line">        |   PRIMARY KEY (`id`)</span><br><span class="line">        | ) ENGINE=InnoDB DEFAULT CHARSET=utf8</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-9"><a href="#⚠️-易错点-9" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>输出结果包含换行符</strong><br><strong>建议</strong>：格式化输出</li>
</ol>
<h3 id="🏭-实际案例-9"><a href="#🏭-实际案例-9" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><p><strong>数据迁移</strong>：将表结构导出到另一个数据库。</p>
<hr>
<h2 id="11-CREATE-TABLE-…-SELECT：快速建表"><a href="#11-CREATE-TABLE-…-SELECT：快速建表" class="headerlink" title="11. CREATE TABLE … SELECT：快速建表"></a>11. CREATE TABLE … SELECT：快速建表</h2><h3 id="🛠️-功能说明-10"><a href="#🛠️-功能说明-10" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>根据查询结果创建新表。</li>
</ul>
<h3 id="🎯-应用场景-10"><a href="#🎯-应用场景-10" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>快速复制表结构和数据</li>
<li>数据备份</li>
</ul>
<h3 id="📝-示例代码-10"><a href="#📝-示例代码-10" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 场景：将 IT 部门的数据备份到新表中</span><br><span class="line">CREATE TABLE it_employees AS</span><br><span class="line">SELECT * FROM employees WHERE department = &#x27;IT&#x27;;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">创建 it_employees 表，包含 IT 部门的数据</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-10"><a href="#⚠️-易错点-10" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>新表不会继承原表的索引和约束</strong><br><strong>建议</strong>：手动添加索引和约束</li>
</ol>
<h3 id="🏭-实际案例-10"><a href="#🏭-实际案例-10" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><p><strong>数据备份</strong>：将部门数据备份到新表中。</p>
<hr>
<h2 id="12-EXPLAIN：SQL-透视镜"><a href="#12-EXPLAIN：SQL-透视镜" class="headerlink" title="12. EXPLAIN：SQL 透视镜"></a>12. EXPLAIN：SQL 透视镜</h2><h3 id="🛠️-功能说明-11"><a href="#🛠️-功能说明-11" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>分析 SQL 语句的执行计划。</li>
</ul>
<h3 id="🎯-应用场景-11"><a href="#🎯-应用场景-11" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>优化查询性能</li>
<li>调试复杂查询</li>
</ul>
<h3 id="📝-示例代码-11"><a href="#📝-示例代码-11" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 场景：分析查询性能瓶颈</span></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> orders <span class="keyword">WHERE</span> user_id <span class="operator">=</span> <span class="number">123</span>;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">id | select_type | table  | type | possible_keys | key      | key_len | ref   | rows | Extra</span><br><span class="line">---|-------------|--------|------|---------------|----------|---------|-------|------|-------</span><br><span class="line">1  | SIMPLE      | orders | ref  | user_id       | user_id  | 4       | const | 10   | Using where</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-11"><a href="#⚠️-易错点-11" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>需要理解执行计划的输出</strong><br><strong>建议</strong>：学习执行计划的各个字段含义</li>
</ol>
<h3 id="🏭-实际案例-11"><a href="#🏭-实际案例-11" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><p><strong>性能优化</strong>：分析慢查询，添加索引。</p>
<hr>
<h2 id="13-SHOW-PROCESSLIST：连接监视器"><a href="#13-SHOW-PROCESSLIST：连接监视器" class="headerlink" title="13. SHOW PROCESSLIST：连接监视器"></a>13. SHOW PROCESSLIST：连接监视器</h2><h3 id="🛠️-功能说明-12"><a href="#🛠️-功能说明-12" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>查看当前数据库的连接和查询状态。</li>
</ul>
<h3 id="🎯-应用场景-12"><a href="#🎯-应用场景-12" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>监控数据库连接</li>
<li>排查性能问题</li>
</ul>
<h3 id="📝-示例代码-12"><a href="#📝-示例代码-12" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 场景：查看当前连接状态</span></span><br><span class="line"><span class="keyword">SHOW</span> PROCESSLIST;</span><br></pre></td></tr></table></figure>

<p><strong>输出结果：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Id   | User | Host         | db      | Command | Time | State    | Info</span><br><span class="line">-----|------|--------------|---------|---------|------|----------|-------</span><br><span class="line">1    | root | localhost    | mydb    | Query   | 0    | executing| SELECT * FROM orders</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-12"><a href="#⚠️-易错点-12" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>需要权限才能查看所有连接</strong><br><strong>建议</strong>：使用管理员账号</li>
</ol>
<h3 id="🏭-实际案例-12"><a href="#🏭-实际案例-12" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><ul>
<li><strong>性能排查</strong>：查看是否有长时间运行的查询。</li>
</ul>
<hr>
<h2 id="14-mysqldump：数据保险箱"><a href="#14-mysqldump：数据保险箱" class="headerlink" title="14. mysqldump：数据保险箱"></a>14. mysqldump：数据保险箱</h2><h3 id="🛠️-功能说明-13"><a href="#🛠️-功能说明-13" class="headerlink" title="🛠️ 功能说明"></a>🛠️ 功能说明</h3><ul>
<li>命令行工具，用于导出数据库结构和数据。</li>
</ul>
<h3 id="🎯-应用场景-13"><a href="#🎯-应用场景-13" class="headerlink" title="🎯 应用场景"></a>🎯 应用场景</h3><ul>
<li>定期数据库备份</li>
<li>跨服务器迁移数据</li>
</ul>
<h3 id="📝-示例代码-13"><a href="#📝-示例代码-13" class="headerlink" title="📝 示例代码"></a>📝 示例代码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导出整个数据库（包含数据和结构）</span></span><br><span class="line">mysqldump -u root -p --databases mydb &gt; backup_20231001.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只导出表结构</span></span><br><span class="line">mysqldump -u root -p --no-data mydb &gt; schema.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导出指定表</span></span><br><span class="line">mysqldump -u root -p mydb <span class="built_in">users</span> orders &gt; users_orders.sql</span><br><span class="line"></span><br><span class="line"><span class="comment"># 压缩导出（推荐大数据库使用）</span></span><br><span class="line">mysqldump -u root -p mydb | gzip &gt; backup_20231001.sql.gz</span><br></pre></td></tr></table></figure>

<h3 id="⚠️-易错点-13"><a href="#⚠️-易错点-13" class="headerlink" title="⚠️ 易错点"></a>⚠️ 易错点</h3><ol>
<li><strong>锁表问题</strong>：默认使用锁表，可能影响线上服务<br><strong>解决</strong>：添加 <code>--single-transaction</code> 参数（仅限 InnoDB）</li>
<li><strong>版本兼容</strong>：高版本导出的数据可能无法导入低版本<br><strong>技巧</strong>：使用 <code>--skip-dump-date</code> 避免时间戳差异</li>
</ol>
<h3 id="🏭-实际案例-13"><a href="#🏭-实际案例-13" class="headerlink" title="🏭 实际案例"></a>🏭 实际案例</h3><p><strong>金融系统</strong>：每天凌晨 3 点通过定时任务执行全量备份，保留 30 天数据。</p>
<hr>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>通过这 14 个功能的深度掌握，你将能够：<br>✅ 提升数据处理效率<br>✅ 写出更安全的 SQL 代码<br>✅ 快速解决复杂业务问题</p>
<h2 id="建议收藏本文，在实际工作中反复查阅实践！🔧🚀"><a href="#建议收藏本文，在实际工作中反复查阅实践！🔧🚀" class="headerlink" title="建议收藏本文，在实际工作中反复查阅实践！🔧🚀"></a>建议收藏本文，在实际工作中反复查阅实践！🔧🚀</h2></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">阿文</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2025/02/28/%F0%9F%9A%80%20MySQL%20%E7%9A%84%2014%20%E4%B8%AA%E5%AE%9D%E8%97%8F%E5%8A%9F%E8%83%BD%E8%AF%A6%E8%A7%A3/">http://example.com/2025/02/28/%F0%9F%9A%80%20MySQL%20%E7%9A%84%2014%20%E4%B8%AA%E5%AE%9D%E8%97%8F%E5%8A%9F%E8%83%BD%E8%AF%A6%E8%A7%A3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">社畜阿文</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a></div><div class="post-share"><div class="social-share" data-image="https://pic1.imgdb.cn/item/67c433a7d0e0a243d40a1fce.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/%E5%BE%AE%E4%BF%A1.jpg" target="_blank"><img class="post-qr-code-img" src="/img/%E5%BE%AE%E4%BF%A1.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/%E6%94%AF%E4%BB%98%E5%AE%9D.jpg" target="_blank"><img class="post-qr-code-img" src="/img/%E6%94%AF%E4%BB%98%E5%AE%9D.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/02/28/%F0%9F%8C%9F%20MyBatis%20%E4%B8%AD%E7%9A%84%2010%20%E4%B8%AA%E5%AE%9D%E8%97%8F%E6%8A%80%E5%B7%A7/" title="🌟 MyBatis 中的 10 个宝藏技巧"><img class="cover" src="https://pic1.imgdb.cn/item/67c43317d0e0a243d40a1fac.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">🌟 MyBatis 中的 10 个宝藏技巧</div></div><div class="info-2"><div class="info-item-1">MyBatis 是一个强大的持久层框架，但它的潜力远不止于基础的 CRUD 操作。本文将分享 10 个 MyBatis 的宝藏技巧，帮助你提升开发效率、优化代码质量，并解锁更多高级功能！🚀 目录 动态 SQL 的灵活运用 结果映射的高级用法 批量操作的性能优化 自定义 TypeHandler 插件机制（Interceptor） 多数据源支持 枚举类型的优雅处理 延迟加载（Lazy Loading） 缓存机制深度优化 注解与 XML 的混合使用   1. 动态 SQL 的灵活运用介绍 MyBatis 的动态 SQL 功能非常强大，可以根据条件动态生成 SQL 语句，避免拼接字符串的繁琐和风险。  代码示例1234567891011121314&lt;select id=&quot;findUsers&quot; resultType=&quot;User&quot;&gt;    SELECT * FROM users    &lt;where&gt;        &lt;if test=&quot;name != null&quot;&gt;            AND...</div></div></div></a><a class="pagination-related" href="/2025/02/28/%F0%9F%9A%80%20JDK%20%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E4%B8%8E%20CGLIB%20%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%A6%E8%A7%A3/" title="🚀 JDK 动态代理与 CGLIB 动态代理详解"><img class="cover" src="https://pic1.imgdb.cn/item/67c433a8d0e0a243d40a1fd2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">🚀 JDK 动态代理与 CGLIB 动态代理详解</div></div><div class="info-2"><div class="info-item-1">本文深入讲解 JDK 动态代理 和 CGLIB 动态代理 的区别、实现原理、应用场景，并通过 示例代码 和 详细注释 帮助你彻底掌握这两种代理技术！✨ 目录 JDK 动态代理 vs CGLIB 动态代理 JDK 动态代理实现原理 JDK 动态代理示例 扩展 JDK 动态代理示例 CGLIB 动态代理实现原理 CGLIB 动态代理示例 总结   1. JDK 动态代理 vs CGLIB 动态代理核心区别   特性 JDK 动态代理 CGLIB 动态代理    代理对象类型 基于接口 基于类（无需接口）   性能 较慢（反射调用） 较快（字节码生成）   依赖 无需额外依赖 需要引入 CGLIB 库   限制 只能代理实现了接口的类 不能代理 final 类或方法   实现原理 反射 + 动态生成代理类 字节码生成 + 继承   适用场景 JDK 动态代理：适用于代理接口或需要轻量级代理的场景。 CGLIB 动态代理：适用于代理类或需要高性能代理的场景。   2. JDK 动态代理实现原理核心机制 反射调用：通过 java.lang.reflect.Proxy...</div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/TouXing.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">阿文</div><div class="author-info-description">一个致力于分享知识，日常，沙雕的博主</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">24</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">32</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>视奸我</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎欢迎，热烈欢迎</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL-%E7%9A%84-14-%E4%B8%AA%E5%AE%9D%E8%97%8F%E5%8A%9F%E8%83%BD%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90"><span class="toc-number">1.</span> <span class="toc-text">MySQL 的 14 个宝藏功能深度解析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95"><span class="toc-number">1.1.</span> <span class="toc-text">目录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-GROUP-CONCAT%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%81%9A%E5%90%88"><span class="toc-number">1.2.</span> <span class="toc-text">1. GROUP_CONCAT：字符串聚合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E"><span class="toc-number">1.2.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.2.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">1.2.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9"><span class="toc-number">1.2.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B"><span class="toc-number">1.2.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-CHAR-LENGTH%EF%BC%9A%E5%AD%97%E7%AC%A6%E7%BA%A7%E9%95%BF%E5%BA%A6%E8%AE%A1%E7%AE%97"><span class="toc-number">1.3.</span> <span class="toc-text">2. CHAR_LENGTH：字符级长度计算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-1"><span class="toc-number">1.3.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-1"><span class="toc-number">1.3.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-1"><span class="toc-number">1.3.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-1"><span class="toc-number">1.3.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-1"><span class="toc-number">1.3.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-LOCATE%EF%BC%9A%E7%B2%BE%E5%87%86%E5%AE%9A%E4%BD%8D%E5%AD%90%E4%B8%B2"><span class="toc-number">1.4.</span> <span class="toc-text">3. LOCATE：精准定位子串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-2"><span class="toc-number">1.4.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-2"><span class="toc-number">1.4.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-2"><span class="toc-number">1.4.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-2"><span class="toc-number">1.4.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-2"><span class="toc-number">1.4.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-REPLACE%EF%BC%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%89%8B%E6%9C%AF%E5%88%80"><span class="toc-number">1.5.</span> <span class="toc-text">4. REPLACE：字符串手术刀</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-3"><span class="toc-number">1.5.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-3"><span class="toc-number">1.5.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-3"><span class="toc-number">1.5.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-3"><span class="toc-number">1.5.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-3"><span class="toc-number">1.5.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-NOW%EF%BC%9A%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86%E5%A4%A7%E5%B8%88"><span class="toc-number">1.6.</span> <span class="toc-text">5. NOW：时间管理大师</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-4"><span class="toc-number">1.6.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-4"><span class="toc-number">1.6.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-4"><span class="toc-number">1.6.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-4"><span class="toc-number">1.6.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-4"><span class="toc-number">1.6.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-INSERT-INTO-%E2%80%A6-SELECT%EF%BC%9A%E6%95%B0%E6%8D%AE%E6%90%AC%E8%BF%90%E5%B7%A5"><span class="toc-number">1.7.</span> <span class="toc-text">6. INSERT INTO … SELECT：数据搬运工</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-5"><span class="toc-number">1.7.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-5"><span class="toc-number">1.7.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-5"><span class="toc-number">1.7.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-5"><span class="toc-number">1.7.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-5"><span class="toc-number">1.7.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-INSERT-IGNORE%EF%BC%9A%E4%BC%98%E9%9B%85%E9%98%B2%E5%86%B2%E7%AA%81"><span class="toc-number">1.8.</span> <span class="toc-text">7. INSERT IGNORE：优雅防冲突</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-6"><span class="toc-number">1.8.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-6"><span class="toc-number">1.8.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-6"><span class="toc-number">1.8.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-6"><span class="toc-number">1.8.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-6"><span class="toc-number">1.8.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-SELECT-FOR-UPDATE%EF%BC%9A%E5%B9%B6%E5%8F%91%E5%AE%89%E5%85%A8%E9%94%81"><span class="toc-number">1.9.</span> <span class="toc-text">8. SELECT FOR UPDATE：并发安全锁</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-7"><span class="toc-number">1.9.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-7"><span class="toc-number">1.9.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-7"><span class="toc-number">1.9.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-7"><span class="toc-number">1.9.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-7"><span class="toc-number">1.9.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-ON-DUPLICATE-KEY-UPDATE%EF%BC%9A%E6%99%BA%E8%83%BD%E5%86%99%E5%85%A5"><span class="toc-number">1.10.</span> <span class="toc-text">9. ON DUPLICATE KEY UPDATE：智能写入</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-8"><span class="toc-number">1.10.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-8"><span class="toc-number">1.10.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-8"><span class="toc-number">1.10.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-8"><span class="toc-number">1.10.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-8"><span class="toc-number">1.10.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-SHOW-CREATE-TABLE%EF%BC%9A%E7%BB%93%E6%9E%84%E5%85%8B%E9%9A%86%E6%9C%AF"><span class="toc-number">1.11.</span> <span class="toc-text">10. SHOW CREATE TABLE：结构克隆术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-9"><span class="toc-number">1.11.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-9"><span class="toc-number">1.11.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-9"><span class="toc-number">1.11.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-9"><span class="toc-number">1.11.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-9"><span class="toc-number">1.11.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-CREATE-TABLE-%E2%80%A6-SELECT%EF%BC%9A%E5%BF%AB%E9%80%9F%E5%BB%BA%E8%A1%A8"><span class="toc-number">1.12.</span> <span class="toc-text">11. CREATE TABLE … SELECT：快速建表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-10"><span class="toc-number">1.12.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-10"><span class="toc-number">1.12.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-10"><span class="toc-number">1.12.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-10"><span class="toc-number">1.12.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-10"><span class="toc-number">1.12.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-EXPLAIN%EF%BC%9ASQL-%E9%80%8F%E8%A7%86%E9%95%9C"><span class="toc-number">1.13.</span> <span class="toc-text">12. EXPLAIN：SQL 透视镜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-11"><span class="toc-number">1.13.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-11"><span class="toc-number">1.13.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-11"><span class="toc-number">1.13.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-11"><span class="toc-number">1.13.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-11"><span class="toc-number">1.13.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-SHOW-PROCESSLIST%EF%BC%9A%E8%BF%9E%E6%8E%A5%E7%9B%91%E8%A7%86%E5%99%A8"><span class="toc-number">1.14.</span> <span class="toc-text">13. SHOW PROCESSLIST：连接监视器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-12"><span class="toc-number">1.14.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-12"><span class="toc-number">1.14.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-12"><span class="toc-number">1.14.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-12"><span class="toc-number">1.14.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-12"><span class="toc-number">1.14.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-mysqldump%EF%BC%9A%E6%95%B0%E6%8D%AE%E4%BF%9D%E9%99%A9%E7%AE%B1"><span class="toc-number">1.15.</span> <span class="toc-text">14. mysqldump：数据保险箱</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%9B%A0%EF%B8%8F-%E5%8A%9F%E8%83%BD%E8%AF%B4%E6%98%8E-13"><span class="toc-number">1.15.1.</span> <span class="toc-text">🛠️ 功能说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8E%AF-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-13"><span class="toc-number">1.15.2.</span> <span class="toc-text">🎯 应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%9D-%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81-13"><span class="toc-number">1.15.3.</span> <span class="toc-text">📝 示例代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E2%9A%A0%EF%B8%8F-%E6%98%93%E9%94%99%E7%82%B9-13"><span class="toc-number">1.15.4.</span> <span class="toc-text">⚠️ 易错点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8F%AD-%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B-13"><span class="toc-number">1.15.5.</span> <span class="toc-text">🏭 实际案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.16.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E8%AE%AE%E6%94%B6%E8%97%8F%E6%9C%AC%E6%96%87%EF%BC%8C%E5%9C%A8%E5%AE%9E%E9%99%85%E5%B7%A5%E4%BD%9C%E4%B8%AD%E5%8F%8D%E5%A4%8D%E6%9F%A5%E9%98%85%E5%AE%9E%E8%B7%B5%EF%BC%81%F0%9F%94%A7%F0%9F%9A%80"><span class="toc-number">1.17.</span> <span class="toc-text">建议收藏本文，在实际工作中反复查阅实践！🔧🚀</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/03/01/%F0%9F%94%A5%20Java%20ORM%20%E5%8F%8C%E9%9B%84%EF%BC%9AMyBatis%20vs%20Hibernate%20%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/" title="🔥 Java ORM 双雄：MyBatis vs Hibernate 深度解析"><img src="https://pic1.imgdb.cn/item/67c433a7d0e0a243d40a1fcf.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="🔥 Java ORM 双雄：MyBatis vs Hibernate 深度解析"/></a><div class="content"><a class="title" href="/2025/03/01/%F0%9F%94%A5%20Java%20ORM%20%E5%8F%8C%E9%9B%84%EF%BC%9AMyBatis%20vs%20Hibernate%20%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90/" title="🔥 Java ORM 双雄：MyBatis vs Hibernate 深度解析">🔥 Java ORM 双雄：MyBatis vs Hibernate 深度解析</a><time datetime="2025-02-28T16:00:00.000Z" title="发表于 2025-03-01 00:00:00">2025-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/01/%F0%9F%9A%80%20DeepSeek+KIMI%20%E5%85%A8%E6%B5%81%E7%A8%8BPPT%E7%94%9F%E6%88%90%E7%BB%88%E6%9E%81%E6%8C%87%E5%8D%97%EF%BC%88%E5%8D%81%E6%AC%A1%E8%BF%AD%E4%BB%A3%E4%BC%98%E5%8C%96%E7%89%88%EF%BC%89/" title="🔥 DeepSeek+KIMI 全流程PPT生成终极指南（十次迭代优化版）"><img src="https://pic1.imgdb.cn/item/67c43390d0e0a243d40a1fc7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="🔥 DeepSeek+KIMI 全流程PPT生成终极指南（十次迭代优化版）"/></a><div class="content"><a class="title" href="/2025/03/01/%F0%9F%9A%80%20DeepSeek+KIMI%20%E5%85%A8%E6%B5%81%E7%A8%8BPPT%E7%94%9F%E6%88%90%E7%BB%88%E6%9E%81%E6%8C%87%E5%8D%97%EF%BC%88%E5%8D%81%E6%AC%A1%E8%BF%AD%E4%BB%A3%E4%BC%98%E5%8C%96%E7%89%88%EF%BC%89/" title="🔥 DeepSeek+KIMI 全流程PPT生成终极指南（十次迭代优化版）">🔥 DeepSeek+KIMI 全流程PPT生成终极指南（十次迭代优化版）</a><time datetime="2025-02-28T16:00:00.000Z" title="发表于 2025-03-01 00:00:00">2025-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/01/%E8%8F%9C%E8%B0%B1%E5%A4%A7%E5%85%A8/" title="🔥《厨房里的百味人生：57种菜品，食补、营养餐、家常菜、排骨和鸡的做法》"><img src="https://pic1.imgdb.cn/item/67c43391d0e0a243d40a1fc9.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="🔥《厨房里的百味人生：57种菜品，食补、营养餐、家常菜、排骨和鸡的做法》"/></a><div class="content"><a class="title" href="/2025/03/01/%E8%8F%9C%E8%B0%B1%E5%A4%A7%E5%85%A8/" title="🔥《厨房里的百味人生：57种菜品，食补、营养餐、家常菜、排骨和鸡的做法》">🔥《厨房里的百味人生：57种菜品，食补、营养餐、家常菜、排骨和鸡的做法》</a><time datetime="2025-02-28T16:00:00.000Z" title="发表于 2025-03-01 00:00:00">2025-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/01/%F0%9F%92%A5%20%E7%A7%91%E5%AD%A6%E5%81%A5%E8%BA%AB%E5%85%A8%E6%94%BB%E7%95%A5%EF%BC%9A%E4%BB%8E%E6%B5%8B%E9%87%8F%E5%88%B0%E6%89%A7%E8%A1%8C/" title="💥 科学健身全攻略：从测量到执行"><img src="https://pic1.imgdb.cn/item/67c4337cd0e0a243d40a1fbe.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="💥 科学健身全攻略：从测量到执行"/></a><div class="content"><a class="title" href="/2025/03/01/%F0%9F%92%A5%20%E7%A7%91%E5%AD%A6%E5%81%A5%E8%BA%AB%E5%85%A8%E6%94%BB%E7%95%A5%EF%BC%9A%E4%BB%8E%E6%B5%8B%E9%87%8F%E5%88%B0%E6%89%A7%E8%A1%8C/" title="💥 科学健身全攻略：从测量到执行">💥 科学健身全攻略：从测量到执行</a><time datetime="2025-02-28T16:00:00.000Z" title="发表于 2025-03-01 00:00:00">2025-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/01/%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/" title="测试文章"><img src="https://pic1.imgdb.cn/item/67c3edd5d0e0a243d4099ef6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="测试文章"/></a><div class="content"><a class="title" href="/2025/03/01/%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/" title="测试文章">测试文章</a><time datetime="2025-02-28T16:00:00.000Z" title="发表于 2025-03-01 00:00:00">2025-03-01</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://pic1.imgdb.cn/item/67c433a7d0e0a243d40a1fce.png);"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By 阿文</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.3</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = ele => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'forest'

    ele.forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = `%%{init:{ 'theme':'${theme}'}}%%\n`
      const mermaidID = `mermaid-${index}`
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({ svg }) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return

    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (true) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }

  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'

  const disqusReset = conf => {
    window.DISQUS && window.DISQUS.reset({
      reload: true,
      config: conf
    })
  }

  const loadDisqus = (el, path) => {
    if (isShuoshuo) {
      window.shuoshuoComment.destroyDisqus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }

    window.disqus_identifier = isShuoshuo ? path : '/2025/02/28/%F0%9F%9A%80%20MySQL%20%E7%9A%84%2014%20%E4%B8%AA%E5%AE%9D%E8%97%8F%E5%8A%9F%E8%83%BD%E8%AF%A6%E8%A7%A3/'
    window.disqus_url = isShuoshuo ? location.origin + path : 'http://example.com/2025/02/28/%F0%9F%9A%80%20MySQL%20%E7%9A%84%2014%20%E4%B8%AA%E5%AE%9D%E8%97%8F%E5%8A%9F%E8%83%BD%E8%AF%A6%E8%A7%A3/'

    const disqus_config = function () {
      this.page.url = disqus_url
      this.page.identifier = disqus_identifier
      this.page.title = '🚀 MySQL 的 14 个宝藏功能深度解析'
    }

    if (window.DISQUS) disqusReset(disqus_config)
    else {
      const script = document.createElement('script')
      script.src = 'https://.disqus.com/embed.js'
      script.setAttribute('data-timestamp', +new Date())
      document.head.appendChild(script)
    }

    btf.addGlobalFn('themeChange', () => disqusReset(disqus_config), 'disqus')
  }

  const getCount = async() => {
    try {
      const eleGroup = document.querySelector('#post-meta .disqus-comment-count')
      if (!eleGroup) return
      const cleanedLinks = eleGroup.href.replace(/#post-comment$/, '')

      const res = await fetch(`https://disqus.com/api/3.0/threads/set.json?forum=&api_key=&thread:link=${cleanedLinks}`,{
        method: 'GET'
      })
      const result = await res.json()

      const count = result.response.length ? result.response[0].posts : 0
      eleGroup.textContent = count
    } catch (err) {
      console.error(err)
    }
  }

  if (isShuoshuo) {
    'Disqus' === 'Disqus'
      ? window.shuoshuoComment = { loadComment: loadDisqus }
      : window.loadOtherComment = loadDisqus
    return
  }

  if ('Disqus' === 'Disqus' || !true) {
    if (true) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
    else {
      loadDisqus()
      
    }
  } else {
    window.loadOtherComment = loadDisqus
  }
})()</script></div><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>